install libstdc++_pic.a if we have pic objs

---
 libstdc++-v3/src/Makefile.am |    7 +++++++
 libstdc++-v3/src/Makefile.in |   13 +++++++++++--
 2 files changed, 18 insertions(+), 2 deletions(-)

Index: gcc-4.5.0/libstdc++-v3/src/Makefile.am
===================================================================
--- gcc-4.5.0.orig/libstdc++-v3/src/Makefile.am	2009-11-19 17:55:25.000000000 +0100
+++ gcc-4.5.0/libstdc++-v3/src/Makefile.am	2010-02-09 16:10:52.000000000 +0100
@@ -364,6 +364,13 @@
 	  $(CXX) $(OPT_LDFLAGS) $(SECTION_LDFLAGS) $(AM_CXXFLAGS) $(LTLDFLAGS) -o $@
 
 
+install-exec-local:
+	pic_objs=`sed -n "s:'::g;s:^pic_object=::p" *.lo | grep -v '^none$$'`; \
+	if [ x"$$pic_objs" != x ]; then \
+		$(AR) cru libstdc++_pic.a $$pic_objs $(top_builddir)/libsupc++/*.o || exit 1; \
+		$(INSTALL_DATA) libstdc++_pic.a $(DESTDIR)$(toolexeclibdir) || exit 1; \
+	fi
+
 # Added bits to build debug library.
 if GLIBCXX_BUILD_DEBUG
 all-local: build_debug
Index: gcc-4.5.0/libstdc++-v3/src/Makefile.in
===================================================================
--- gcc-4.5.0.orig/libstdc++-v3/src/Makefile.in	2009-12-05 18:18:53.000000000 +0100
+++ gcc-4.5.0/libstdc++-v3/src/Makefile.in	2010-02-09 16:13:09.000000000 +0100
@@ -731,7 +731,7 @@
 
 install-dvi-am:
 
-install-exec-am: install-toolexeclibLTLIBRARIES
+install-exec-am: install-toolexeclibLTLIBRARIES install-exec-local
 
 install-html: install-html-am
 
@@ -787,7 +787,8 @@
 	installdirs maintainer-clean maintainer-clean-generic \
 	mostlyclean mostlyclean-compile mostlyclean-generic \
 	mostlyclean-libtool pdf pdf-am ps ps-am tags uninstall \
-	uninstall-am uninstall-toolexeclibLTLIBRARIES
+	uninstall-am uninstall-toolexeclibLTLIBRARIES \
+	install-exec-local
 
 
 # Symbol versioning for shared libraries.
@@ -975,6 +976,14 @@
 	(cd ${debugdir} && $(MAKE) \
 	toolexeclibdir=$(glibcxx_toolexeclibdir)/debug install)
 
+
+install-exec-local:
+	pic_objs=`sed -n "s:'::g;s:^pic_object=::p" *.lo | grep -v '^none$$'`; \
+	if [ x"$$pic_objs" != x ]; then \
+		$(AR) cru libstdc++_pic.a $$pic_objs $(top_builddir)/libsupc++/*.o || exit 1; \
+		$(INSTALL_DATA) libstdc++_pic.a $(DESTDIR)$(toolexeclibdir) || exit 1; \
+	fi
+
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
